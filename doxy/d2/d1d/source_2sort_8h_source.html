<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Flow: D:/git/flow/flow/flow/source/Sort.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Flow
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_2420eba184a3676f5a7fb84b29bc58a5.html">flow</a></li><li class="navelem"><a class="el" href="../../dir_8d759b635f6b804b122261ed7ac7ad98.html">flow</a></li><li class="navelem"><a class="el" href="../../dir_ea07bf8b3390f63010cdfb03a819f6cb.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Sort.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d1d/source_2sort_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifndef FLOW_SOURCE_SORT_H</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define FLOW_SOURCE_SORT_H</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d9/de2/namespaceflow.html">flow</a> {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keyword">namespace </span>source {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Source&gt;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../de/d82/classflow_1_1source_1_1_sort.html">   41</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../de/d82/classflow_1_1source_1_1_sort.html">Sort</a> : <span class="keyword">public</span> <a class="code" href="../../d6/ddc/classflow_1_1source_1_1_iterator.html">Iterator</a>&lt;typename std::vector&lt;typename Source::value_type&gt;::iterator&gt;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../de/d82/classflow_1_1source_1_1_sort.html#ad724a500511fb454fbc2f1b73139fc6f">   44</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../de/d82/classflow_1_1source_1_1_sort.html#ad724a500511fb454fbc2f1b73139fc6f">value_type</a> = <span class="keyword">typename</span> Source::value_type;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../de/d82/classflow_1_1source_1_1_sort.html#aad0e07e59fb6188d90f4ea0422d1f932">   45</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="../../d6/ddc/classflow_1_1source_1_1_iterator.html">parent_type</a> = <a class="code" href="../../d6/ddc/classflow_1_1source_1_1_iterator.html">Iterator&lt;typename std::vector&lt;value_type&gt;::iterator</a>&gt;;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Compare&gt;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../de/d82/classflow_1_1source_1_1_sort.html#a331afe1bcf947cfe4d93ab8e64404fd1">   54</a></span>&#160;    <a class="code" href="../../de/d82/classflow_1_1source_1_1_sort.html#a331afe1bcf947cfe4d93ab8e64404fd1">Sort</a>(Source&amp;&amp; source, Compare compare, <span class="keywordtype">bool</span> <a class="code" href="../../dc/d09/namespaceflow_1_1intermediate.html#ab9a5f0773de4aac232e80ae23495e76e">stable_sort</a>) : _source(std::move(source)), _stream()</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="../../de/d82/classflow_1_1source_1_1_sort.html#a60e2968eedf8c0fb89978061ef02c223">sort</a>(compare, stable_sort); </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Compare&gt;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../de/d82/classflow_1_1source_1_1_sort.html#a60e2968eedf8c0fb89978061ef02c223">   65</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../de/d82/classflow_1_1source_1_1_sort.html#a60e2968eedf8c0fb89978061ef02c223">sort</a>(Compare compare, <span class="keywordtype">bool</span> <a class="code" href="../../dc/d09/namespaceflow_1_1intermediate.html#ab9a5f0773de4aac232e80ae23495e76e">stable_sort</a>) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        _stream.reserve(_source.estimate_size());</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">while</span> (_source.has_next()) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            _stream.emplace_back(std::move(_source.next()));</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">if</span> (stable_sort) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <a class="code" href="../../dc/d09/namespaceflow_1_1intermediate.html#ab9a5f0773de4aac232e80ae23495e76e">std::stable_sort</a>(_stream.begin(), _stream.end(), compare);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="../../dc/d09/namespaceflow_1_1intermediate.html#a0641d6ecc741bd5f346a961e5e8ccf44">std::sort</a>(_stream.begin(), _stream.end(), compare);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="../../d6/ddc/classflow_1_1source_1_1_iterator.html#aaae1b8376b95a5f5bdbf0ad4cdb9d146">parent_type::_current</a> = _stream.begin();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="../../d6/ddc/classflow_1_1source_1_1_iterator.html#aaa05e42a77aebf0427ca8236448ec893">parent_type::_end</a> = _stream.end();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    Source _source;                     <span class="comment">// the source to read from</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    std::vector&lt;value_type&gt; _stream;    <span class="comment">// the sorted stream</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;};</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="namespaceflow_1_1intermediate_html_a0641d6ecc741bd5f346a961e5e8ccf44"><div class="ttname"><a href="../../dc/d09/namespaceflow_1_1intermediate.html#a0641d6ecc741bd5f346a961e5e8ccf44">flow::intermediate::sort</a></div><div class="ttdeci">auto sort(Compare compare=Compare())</div><div class="ttdoc">Sorts the Stream using the given comparator. By default, operator< is used. Sorting is an eager opera...</div><div class="ttdef"><b>Definition:</b> sort.h:53</div></div>
<div class="ttc" id="classflow_1_1source_1_1_sort_html_ad724a500511fb454fbc2f1b73139fc6f"><div class="ttname"><a href="../../de/d82/classflow_1_1source_1_1_sort.html#ad724a500511fb454fbc2f1b73139fc6f">flow::source::Sort::value_type</a></div><div class="ttdeci">typename Source::value_type value_type</div><div class="ttdef"><b>Definition:</b> Sort.h:44</div></div>
<div class="ttc" id="classflow_1_1source_1_1_sort_html_a60e2968eedf8c0fb89978061ef02c223"><div class="ttname"><a href="../../de/d82/classflow_1_1source_1_1_sort.html#a60e2968eedf8c0fb89978061ef02c223">flow::source::Sort::sort</a></div><div class="ttdeci">void sort(Compare compare, bool stable_sort)</div><div class="ttdoc">Pulls all the elements from the source stream and sorts them. </div><div class="ttdef"><b>Definition:</b> Sort.h:65</div></div>
<div class="ttc" id="classflow_1_1source_1_1_sort_html_a331afe1bcf947cfe4d93ab8e64404fd1"><div class="ttname"><a href="../../de/d82/classflow_1_1source_1_1_sort.html#a331afe1bcf947cfe4d93ab8e64404fd1">flow::source::Sort::Sort</a></div><div class="ttdeci">Sort(Source &amp;&amp;source, Compare compare, bool stable_sort)</div><div class="ttdoc">Initializes a new instance of the Sort{Source, Compare} class. </div><div class="ttdef"><b>Definition:</b> Sort.h:54</div></div>
<div class="ttc" id="namespaceflow_1_1intermediate_html_ab9a5f0773de4aac232e80ae23495e76e"><div class="ttname"><a href="../../dc/d09/namespaceflow_1_1intermediate.html#ab9a5f0773de4aac232e80ae23495e76e">flow::intermediate::stable_sort</a></div><div class="ttdeci">auto stable_sort(Compare compare=Compare())</div><div class="ttdoc">Sorts the Stream preserving relative order of elements using the given comparator. By default, operator< is used. Sorting is an eager operation. On the creation of the sort operation, the entire stream up to that point is evaluated and stored, then finally sorted before lazily continuing with the remainder of the stream. Thus, the sort operation takes O(n) extra space and time (excluding the sort), where n is the size of the stream. For most applications, it will be beneficial to sort the source of the stream beforehand if possible. For example, the following should be avoided: int min = my_vector | stable_sort() | first(); // just an example  Instead, sorting the container in place beforehand will be more efficient as no copying takes place.  std::stable_sort(my_vector.begin(), my_vector.end()); int min = my_vector | first(); </div><div class="ttdef"><b>Definition:</b> sort.h:74</div></div>
<div class="ttc" id="classflow_1_1source_1_1_iterator_html_aaa05e42a77aebf0427ca8236448ec893"><div class="ttname"><a href="../../d6/ddc/classflow_1_1source_1_1_iterator.html#aaa05e42a77aebf0427ca8236448ec893">flow::source::Iterator::_end</a></div><div class="ttdeci">Itr _end</div><div class="ttdoc">The off end iterator. </div><div class="ttdef"><b>Definition:</b> Iterator.h:96</div></div>
<div class="ttc" id="classflow_1_1source_1_1_sort_html"><div class="ttname"><a href="../../de/d82/classflow_1_1source_1_1_sort.html">flow::source::Sort</a></div><div class="ttdoc">Stream source to sort the stream. Sorting is an eager operation, the entire stream up to this point i...</div><div class="ttdef"><b>Definition:</b> Sort.h:41</div></div>
<div class="ttc" id="classflow_1_1source_1_1_iterator_html"><div class="ttname"><a href="../../d6/ddc/classflow_1_1source_1_1_iterator.html">flow::source::Iterator</a></div><div class="ttdoc">Stream source for a pair of iterators. </div><div class="ttdef"><b>Definition:</b> Iterator.h:38</div></div>
<div class="ttc" id="classflow_1_1source_1_1_iterator_html_aaae1b8376b95a5f5bdbf0ad4cdb9d146"><div class="ttname"><a href="../../d6/ddc/classflow_1_1source_1_1_iterator.html#aaae1b8376b95a5f5bdbf0ad4cdb9d146">flow::source::Iterator::_current</a></div><div class="ttdeci">Itr _current</div><div class="ttdoc">The current iterator. </div><div class="ttdef"><b>Definition:</b> Iterator.h:91</div></div>
<div class="ttc" id="namespaceflow_html"><div class="ttname"><a href="../../d9/de2/namespaceflow.html">flow</a></div><div class="ttdef"><b>Definition:</b> Compose.h:29</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
